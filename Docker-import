FROM python:3.9-slim

WORKDIR /app


COPY buffer.sh /app/buffer.sh

RUN apt-get update -y && apt-get upgrade -y && apt-get install -y netcat-traditional dos2unix
RUN pip install mysql-connector-python

RUN dos2unix /app/buffer.sh

COPY import.py /app/
RUN dos2unix /app/import.py


RUN chmod +x /app/buffer.sh

CMD ["/app/buffer.sh", "mysql_db:3306", "--", "python3", "/app/import.py"]